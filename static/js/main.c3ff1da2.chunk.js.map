{"version":3,"sources":["panels/Home.js","panels/Result.js","panels/Сongratulation.jsx","App.js","index.js"],"names":["colors","sections","probability","Home","props","id","canvas","useRef","canvas2","canvas3","useState","innerWidth","setInnerWidth","innerHeight","setInnerHeight","wheels","frame","selected","angle","running","useEffect","window","repaint","current","csz","setInterval","sz","r","Math","min","selected2","length","c","width","height","ctx","getContext","cx","cy","g","createRadialGradient","addColorStop","i","a0","PI","a1","a","beginPath","moveTo","arc","fillStyle","fill","save","shadowColor","shadowBlur","font","textAlign","textBaseline","translate","rotate","fillText","restore","push","ctx2","shadowOffsetX","shadowOffsetY","lineTo","ctx3","floor","drawImage","getRandomInt","max","random","className","ref","align","onClick","result","arrResult","ii","getResult","degrees","fullDegrees","startDegreesResult","finishDegreesResult","speed","duration","start","performance","now","angle0","requestAnimationFrame","t","setResult","attempts","setAttempts","setActivePanel","setPopout","size","sendResult","spin","disabled","hidden","Result","go","data-to","Сongratulation","time","Date","getHours","workTime","nonWorkTime","token","App","activePanel","fetchedUser","setUser","popout","connect","sendPromise","user","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","e","currentTarget","dataset","to","wellDate","sendInfo","first_name","toLocaleString","year","month","day","timezone","hour","minute","second","guid1","guid2","send","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c3ff1da2.chunk.js","sourcesContent":["import React, {useRef, useEffect, useState, createContext, useContext} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\r\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\r\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\r\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/Spinner/Spinner\";\r\n\r\n\r\n\r\nlet colors = [\"#F84\", \"#8F4\", \"#48F\", \"#F8F\"];\r\nlet sections = [\"один\", \"два\", \"три\", \"четыре\", \"пять\", \"шесть\", \"семь\", \"восемь\", \"девять\", \"десять\"];\r\nlet probability = [0, 1, 0, 0, 0, 0, 3, 0, 0, 0]\r\n\r\nconst Home = (props) => {\r\n\tlet {id} = props;\r\n\tconst canvas = useRef(null);\r\n\tconst canvas2 = useRef(null);\r\n\tconst canvas3 = useRef(null);\r\n\tlet [innerWidth, setInnerWidth] = useState(380)\r\n\tlet [innerHeight, setInnerHeight] = useState(380)\r\n\tlet wheels = null;\r\n\tlet frame = null;\r\n\tlet selected = null;\r\n\tlet angle = 0, running = false;\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tsetInnerWidth(window.innerWidth > 0 ? window.innerWidth : 380)\r\n\t\tsetInnerHeight(window.innerHeight > 0 ? window.innerHeight * 0.7 : 380)\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\trepaint(angle)\r\n\t\tif (canvas.current) {\r\n\t\t\tlet csz = null;\r\n\t\t\tsetInterval(function() {\r\n\t\t\t\tlet sz = innerWidth + \"/\" + innerHeight;\r\n\t\t\t\tif (csz !== sz) {\r\n\t\t\t\t\tcsz = sz;\r\n\t\t\t\t\twheels = frame = null;\r\n\t\t\t\t\trepaint(angle);\r\n\t\t\t\t}\r\n\t\t\t}, 10);\r\n\t\t}\r\n\t}, [innerWidth, innerHeight]);\r\n\r\n\r\n\tconst repaint = (angle) => {\r\n\tlet r = Math.min(innerWidth, innerHeight) / 2.25 | 0;\r\n\tif (running || wheels === null) {\r\n\t\twheels = [];\r\n\t\tfor (let selected2=0; selected2<sections.length; selected2++) {\r\n\t\t\tlet c = canvas.current;\r\n\t\t\tc.width = c.height = 2*r + 10;\r\n\t\t\tlet ctx = c.getContext(\"2d\"), cx = 5 + r, cy = 5 + r;\r\n\t\t\tlet g = ctx.createRadialGradient(cx, cy, 0, cx, cy, r);\r\n\t\t\tg.addColorStop(0, \"rgba(0,0,0,0)\");\r\n\t\t\tg.addColorStop(1, \"rgba(0,0,0,0.5)\");\r\n\t\t\tfor (let i=0; i<sections.length; i++) {\r\n\t\t\t\tlet a0 = 2*Math.PI*i/sections.length;\r\n\t\t\t\tlet a1 = a0 + 2*Math.PI/(i == 0 ? 1 : sections.length);\r\n\t\t\t\tlet a = 2*Math.PI*(i+0.5)/sections.length;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(cx, cy);\r\n\t\t\t\tctx.arc(cx, cy, r, a0, a1, false);\r\n\t\t\t\tctx.fillStyle = colors[i % 4];\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.fillStyle = g;\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.save();\r\n\t\t\t\tif (i == selected) {\r\n\t\t\t\t\tctx.fillStyle = \"#FFF\";\r\n\t\t\t\t\tctx.shadowColor = \"#FFF\";\r\n\t\t\t\t\tctx.shadowBlur = r/20;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tctx.fillStyle = \"#AAA\";\r\n\t\t\t\t\tctx.shadowColor = \"#000\";\r\n\t\t\t\t\tctx.shadowBlur = r/100;\r\n\t\t\t\t}\r\n\t\t\t\tctx.font = \"bold \" + r/sections.length*0.7 + \"px serif\";\r\n\t\t\t\tctx.textAlign = \"center\";\r\n\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\tctx.translate(cx, cy);\r\n\t\t\t\tctx.rotate(a);\r\n\t\t\t\tctx.fillText(sections[i], r*0.62, 0);\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t\twheels.push(c);\r\n\t\t}\r\n\t}\r\n\tif (frame === null) {\r\n\t\tframe = canvas2.current;\r\n\t\tframe.width = frame.height = 10 + 2*r*1.25 | 0;\r\n\t\tlet ctx2 = frame.getContext(\"2d\"), cx = frame.width/2, cy = frame.height/2;\r\n\t\tctx2.shadowOffsetX = r/80;\r\n\t\tctx2.shadowOffsetY = r/80;\r\n\t\tctx2.shadowBlur = r/40;\r\n\t\tctx2.shadowColor = \"rgba(0,0,0,0.5)\";\r\n\t\tctx2.beginPath();\r\n\t\tctx2.arc(cx, cy, r*1.025, 0, 2*Math.PI, true);\r\n\t\tctx2.arc(cx, cy, r*0.975, 0, 2*Math.PI, false);\r\n\t\tctx2.fillStyle = \"#444\";\r\n\t\tctx2.fill();\r\n\t\tctx2.shadowOffsetX = r/40;\r\n\t\tctx2.shadowOffsetY = r/40;\r\n\t\tlet g = ctx2.createRadialGradient(cx-r/7, cy-r/7, 0, cx, cy, r/3);\r\n\t\tg.addColorStop(0, \"#FFF\");\r\n\t\tg.addColorStop(0.2, \"#F44\");\r\n\t\tg.addColorStop(1, \"#811\");\r\n\t\tctx2.fillStyle = g;\r\n\t\tctx2.beginPath();\r\n\t\tctx2.arc(cx, cy, r/3.5, 0, 2*Math.PI, false);\r\n\t\tctx2.fill();\r\n\t\tctx2.translate(cx, cy);\r\n\t\tctx2.rotate(Math.PI - 0.2);\r\n\t\tctx2.beginPath();\r\n\t\tctx2.moveTo(- r*1.1, - r*0.05);\r\n\t\tctx2.lineTo(- r*0.9, 0);\r\n\t\tctx2.lineTo(- r*1.1, r*0.05);\r\n\t\tctx2.fillStyle = \"#F44\";\r\n\t\tctx2.fill();\r\n\t}\r\n\t\tcanvas3.current.width = innerWidth;\r\n\t\tcanvas3.current.height = innerHeight;\r\n\tlet cx = innerWidth/2, cy = innerHeight/2;\r\n\tlet ctx3 = canvas3.current.getContext(\"2d\");\r\n\tselected = (Math.floor((- 0.2 - angle) * sections.length / (2*Math.PI))\r\n\t\t% sections.length);\r\n\tif (selected < 0) selected += sections.length;\r\n\tctx3.save();\r\n\tctx3.translate(cx, cy);\r\n\tctx3.rotate(angle);\r\n\tctx3.translate(-wheels[selected].width/2, -wheels[selected].height/2);\r\n\tctx3.drawImage(wheels[selected], 0, 0);\r\n\tctx3.restore();\r\n\tctx3.drawImage(frame, cx - frame.width/2, cy - frame.height/2);\r\n\t}\r\n\r\n\tconst getRandomInt = (min, max) => {\r\n\t\treturn Math.floor(Math.random() * (max - min)) + min;\r\n\t}\r\n\r\n\tconst getResult = () => {\r\n\t\tlet arrResult = []\r\n\t\tfor (let i = 0; i < probability.length; i++) {\r\n\t\t\tfor (let ii = 0; ii < probability[i]; ii++){\r\n\t\t\t\tarrResult.push(i)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn arrResult[getRandomInt(0, arrResult.length)]\r\n\t}\r\n\r\n\r\n\tconst spin = (speed, duration) => {\r\n\t\tlet start = performance.now(), angle0 = angle;\r\n\t\tfunction frame() {\r\n\t\t\tlet now = performance.now();\r\n\t\t\tlet t = (now - start) / duration;\r\n\t\t\tif (t > 1) t = 1;\r\n\t\t\tangle = angle0 + (speed*t - 0.5*speed*t*t)*100;\r\n\t\t\trepaint(angle);\r\n\t\t\tif (t < 1) requestAnimationFrame(frame); else {\r\n\t\t\t\trunning = false\r\n\t\t\t\tprops.setResult(sections[selected])\r\n\t\t\t\tif(props.attempts === 0) {\r\n\t\t\t\t\tprops.setAttempts(1)\r\n\t\t\t\t\tprops.setActivePanel(\"result\")\r\n\t\t\t\t} else if (props.attempts === 1) {\r\n\t\t\t\t\tprops.setAttempts(2)\r\n\t\t\t\t\tprops.setPopout(<ScreenSpinner size='large' className='ScreenSpinner'/>)\r\n                    props.sendResult(sections[selected])\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\t\trequestAnimationFrame(frame);\r\n\t\trunning = true;\r\n\t}\r\n\r\n\tconst run = () => {\r\n\t\tif (!running) {\r\n\t\t\tlet result = getResult()\r\n\t\t\t//градусов на 1 позицию\r\n\t\t\tlet degrees = 360 / sections.length; //90\r\n\t\t\t// сколько надо на 1 градус\r\n\t\t\tlet fullDegrees = 360\r\n\t\t\tlet startDegreesResult = 0\r\n\t\t\tlet finishDegreesResult = 360\r\n\t\t\tfor (let i = sections.length; i > 0; i--) {\r\n\t\t\t\tif (i === result + 1) finishDegreesResult = fullDegrees - 1\r\n\t\t\t\tfullDegrees = fullDegrees - degrees\r\n\t\t\t\tif (i === result + 1) startDegreesResult = fullDegrees + 1\r\n\t\t\t}\r\n\t\t\tlet randomSpeed = getRandomInt(startDegreesResult, finishDegreesResult) * 0.00034906\r\n\r\n\t\t\t// spin(0.5+Math.random()*0.125, 5000);\r\n\t\t\t// spin(0.5025+0.1255, 5000); от 1 до 2 круга ровно\r\n\t\t\t//конец первого значения 0.5025+0.1217\r\n\t\t\t//нчало первого 0.5025+0.0905\r\n\t\t\t//начало 4 - 0.62432 и 0.49866\r\n\t\t\t// круг идет 0,12566 позиций, т.е. от 0.49866 до 0.62432 начиная с конца\r\n\t\t\t//0,00034906\r\n\r\n\t\t\tspin(0.62432 - randomSpeed, 5000);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Panel id={id} >\r\n\t\t\t<div className='panel-well'>\r\n                <canvas ref={canvas3} id=\"canvas\" width=\"956\" height=\"754\" className='canvas'></canvas>\r\n\t\t\t</div>\r\n\t\t\t\t<Div align='center'>\r\n\t\t\t\t\t<Button onClick={run} disabled={running} align='center'>\r\n\t\t\t\t\t\tВращать колесо\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Div>\r\n\t\t\t<canvas hidden={true} ref={canvas} id=\"canvas\" width=\"956\" height=\"754\"></canvas>\r\n\t\t\t<canvas hidden={true} ref={canvas2} id=\"canvas\" width=\"956\" height=\"754\"></canvas>\r\n\t\t</Panel>\r\n\t);\r\n}\r\n\r\nHome.propTypes = {\r\n\tid: PropTypes.string.isRequired,\r\n\tgo: PropTypes.func.isRequired,\r\n\tfetchedUser: PropTypes.shape({\r\n\t\tphoto_200: PropTypes.string,\r\n\t\tfirst_name: PropTypes.string,\r\n\t\tlast_name: PropTypes.string,\r\n\t\tcity: PropTypes.shape({\r\n\t\t\ttitle: PropTypes.string,\r\n\t\t}),\r\n\t}),\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport \"./Сongratulation.css\"\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/Spinner/Spinner\";\n\nconst Result = props => (\n\t<Panel id={props.id}>\n\t\t<div className=\"СongratulationFormSell\">\n\t\t\t<div className='Сongratulation mx-auto'>\n\t\t\t\t<h2> Поздравляем! </h2>\n\t\t\t\t<p>Вы выграли {props.result}</p>\n\t\t\t\t<p>Вы можете попробовать еще один раз</p>\n\n\t\t\t\t<Button onClick={props.go} data-to=\"home\" align='left'>\n\t\t\t\t\tВращать еще раз\n\t\t\t\t</Button>\n\t\t\t\t<br/>\n\t\t\t\t<br/>\n\t\t\t\t<Button onClick={() => {\n\t\t\t\t\tprops.setPopout(<ScreenSpinner size='large' className='ScreenSpinner'/>)\n\t\t\t\t\tprops.sendResult(props.result)\n\t\t\t\t}} align='right'>\n\t\t\t\t\tЗабрать приз\n\t\t\t\t</Button>\n\n\t\t\t</div>\n\t\t</div>\n\t</Panel>\n);\n\nResult.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\nexport default Result;\n","import React from 'react';\r\nimport \"./Сongratulation.css\"\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\r\n\r\n\r\nconst Сongratulation = (props) => {\r\n    const time = new Date().getHours();\r\n    const workTime = `Ваш приз ${props.result}, мы свяжемся с Вами в ближайшие 30 минут`;\r\n    const nonWorkTime = `Ваш приз ${props.result}, наш менеджер свяжется с Вами завтра до 11:00`;\r\n\r\n    return (\r\n        <Panel id={props.id} className=\"СongratulationFormSell\">\r\n            <div className='Сongratulation mx-auto'>\r\n                <h2>{time < 9 || time > 21 ? nonWorkTime : workTime}</h2>\r\n            </div>\r\n        </Panel>\r\n    );\r\n}\r\n\r\nexport default Сongratulation;\r\n","import React, { useState, useEffect } from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './app.css'\nimport Home from './panels/Home';\nimport Result from './panels/Result';\nimport Сongratulation from \"./panels/Сongratulation\";\n\n\n//ИД пользователя, которому отправлять заказ\nconst user_id1 = \"184750457\";\nconst user_id2 = \"1587067\";\n\n\n//ИД привязаной кгрупы с добавленным минусом\nconst group_id = '-189092828';\n\n//токен из настройки группы\nconst token = \"a2d7546a9a8d0056331bbc2b99a3432dd9750aa3a0d3561de6b6482b0592015bb97e321ffa210f48a9ea8\";\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst [result, setResult] = useState(null);\n\tconst [attempts, setAttempts] = useState(0);\n\n\n\n\tuseEffect(() => {\n\t\tconnect.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t\tif (type === 'VKWebAppCallAPIMethodResult') {\n\t\t\t\tif (activePanel !== \"Сongratulation\") {\n\t\t\t\t\tsetPopout(null);\n\t\t\t\t\tsetActivePanel(\"Сongratulation\")\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await connect.sendPromise('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\tconst sendResult = (result) => {\n\t\tlet wellDate = new Date();\n\t\tlet sendInfo = `Пользователь: https://vk.com/id${fetchedUser.id}, имя: ${fetchedUser.first_name}. Вращал колесо:  ${wellDate.toLocaleString(\"ru\", {year: 'numeric', month: 'long', day: 'numeric', timezone: 'UTC', hour: 'numeric', minute: 'numeric', second: 'numeric'})}. Выграл: ${result}`\n\t\tlet guid1 = Math.floor(1000000000 + Math.random() * (9000000000 + 1 - 1000000000));\n\t\tlet guid2 = Math.floor(1000000000 + Math.random() * (9000000000 + 1 - 1000000000));\n\t\tconnect.send(\"VKWebAppCallAPIMethod\", {\n\t\t\t\"method\": \"messages.send\",\n\t\t\t\"request_id\": \"sendOrder\",\n\t\t\t\"params\": {\n\t\t\t\t\"user_id\": user_id1,\n\t\t\t\t\"v\": \"5.102\",\n\t\t\t\t\"random_id\": guid1,\n\t\t\t\t\"peer_id\": group_id,\n\t\t\t\t\"message\": sendInfo,\n\t\t\t\t\"access_token\": token\n\t\t\t}\n\t\t});\n\n\t\tconnect.send(\"VKWebAppCallAPIMethod\", {\n\t\t\t\"method\": \"messages.send\",\n\t\t\t\"request_id\": \"sendOrder\",\n\t\t\t\"params\": {\n\t\t\t\t\"user_id\": user_id2,\n\t\t\t\t\"v\": \"5.102\",\n\t\t\t\t\"random_id\": guid2,\n\t\t\t\t\"peer_id\": group_id,\n\t\t\t\t\"message\": sendInfo,\n\t\t\t\t\"access_token\": token\n\t\t\t}\n\t\t});\n\t};\n\n\treturn (\n\t\t<View activePanel={activePanel} popout={popout}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} setActivePanel={setActivePanel}\n\t\t\t\t  result={result} setResult={setResult}\n\t\t\t\t  setAttempts={setAttempts}\n\t\t\t\t  attempts={attempts}\n\t\t\t\t  sendResult={sendResult}\n\t\t\t\t  setPopout={setPopout}\n\t\t\t/>\n\t\t\t<Result id='result' go={go} result={result} setActivePanel={setActivePanel} sendResult={sendResult} setPopout={setPopout}/>\n\t\t\t<Сongratulation id='Сongratulation' go={go} result={result}/>\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}