{"version":3,"sources":["panels/Home.js","panels/Сongratulation.jsx","panels/Result.js","App.js","index.js"],"names":["colors","sections","probability","Home","props","id","canvas","go","fetchedUser","useRef","canvas2","canvas3","useState","innerWidth","setInnerWidth","innerHeight","setInnerHeight","wheels","frame","selected","angle","running","useEffect","window","repaint","current","csz","setInterval","sz","r","Math","min","selected2","length","c","width","height","ctx","getContext","cx","cy","g","createRadialGradient","addColorStop","i","a0","PI","a1","a","beginPath","moveTo","arc","fillStyle","fill","save","shadowColor","shadowBlur","font","textAlign","textBaseline","translate","rotate","fillText","restore","push","ctx2","shadowOffsetX","shadowOffsetY","lineTo","ctx3","floor","drawImage","getRandomInt","max","random","ref","className","align","onClick","result","arrResult","ii","getResult","degrees","fullDegrees","startDegreesResult","finishDegreesResult","console","log","speed","duration","start","performance","now","angle0","requestAnimationFrame","t","setResult","attempts","setAttempts","setActivePanel","spin","disabled","hidden","Сongratulation","time","Date","getHours","workTime","nonWorkTime","Result","platform","data-to","App","activePanel","setUser","size","setPopout","connect","sendPromise","user","subscribe","detail","type","data","schemeAttribute","document","createAttribute","value","scheme","body","attributes","setNamedItem","fetchData","e","currentTarget","dataset","to","send","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e8211e81.chunk.js","sourcesContent":["import React, {useRef, useEffect, useState, createContext, useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport Button from '@vkontakte/vkui/dist/components/Button/Button';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Div from '@vkontakte/vkui/dist/components/Div/Div';\n\n\n\nlet colors = [\"#F84\", \"#8F4\", \"#48F\", \"#F8F\"];\nlet sections = [\"один\", \"два\", \"три\", \"четыре\", \"пять\", \"шесть\", \"семь\", \"восемь\", \"девять\", \"десять\"];\nlet probability = [0, 1, 0, 0, 0, 0, 3, 0, 0, 0]\n\nconst Home = (props) => {\n\tlet {id, go, fetchedUser} = props;\n\tconst canvas = useRef(null);\n\tconst canvas2 = useRef(null);\n\tconst canvas3 = useRef(null);\n\tlet [innerWidth, setInnerWidth] = useState(380)\n\tlet [innerHeight, setInnerHeight] = useState(380)\n\tlet wheels = null;\n\tlet frame = null;\n\tlet selected = null;\n\tlet angle = 0, running = false;\n\n\n\tuseEffect(() => {\n\t\tsetInnerWidth(window.innerWidth > 0 ? window.innerWidth : 380)\n\t\tsetInnerHeight(window.innerHeight > 0 ? window.innerHeight * 0.7 : 380)\n\t}, []);\n\n\tuseEffect(() => {\n\t\trepaint(angle)\n\t\tif (canvas.current) {\n\t\t\tlet csz = null;\n\t\t\tsetInterval(function() {\n\t\t\t\tlet sz = innerWidth + \"/\" + innerHeight;\n\t\t\t\tif (csz !== sz) {\n\t\t\t\t\tcsz = sz;\n\t\t\t\t\twheels = frame = null;\n\t\t\t\t\trepaint(angle);\n\t\t\t\t}\n\t\t\t}, 10);\n\t\t}\n\t}, [innerWidth, innerHeight]);\n\n\n\tconst repaint = (angle) => {\n\tlet r = Math.min(innerWidth, innerHeight) / 2.25 | 0;\n\tif (running || wheels === null) {\n\t\twheels = [];\n\t\tfor (let selected2=0; selected2<sections.length; selected2++) {\n\t\t\tlet c = canvas.current;\n\t\t\tc.width = c.height = 2*r + 10;\n\t\t\tlet ctx = c.getContext(\"2d\"), cx = 5 + r, cy = 5 + r;\n\t\t\tlet g = ctx.createRadialGradient(cx, cy, 0, cx, cy, r);\n\t\t\tg.addColorStop(0, \"rgba(0,0,0,0)\");\n\t\t\tg.addColorStop(1, \"rgba(0,0,0,0.5)\");\n\t\t\tfor (let i=0; i<sections.length; i++) {\n\t\t\t\tlet a0 = 2*Math.PI*i/sections.length;\n\t\t\t\tlet a1 = a0 + 2*Math.PI/(i == 0 ? 1 : sections.length);\n\t\t\t\tlet a = 2*Math.PI*(i+0.5)/sections.length;\n\t\t\t\tctx.beginPath();\n\t\t\t\tctx.moveTo(cx, cy);\n\t\t\t\tctx.arc(cx, cy, r, a0, a1, false);\n\t\t\t\tctx.fillStyle = colors[i % 4];\n\t\t\t\tctx.fill();\n\t\t\t\tctx.fillStyle = g;\n\t\t\t\tctx.fill();\n\t\t\t\tctx.save();\n\t\t\t\tif (i == selected) {\n\t\t\t\t\tctx.fillStyle = \"#FFF\";\n\t\t\t\t\tctx.shadowColor = \"#FFF\";\n\t\t\t\t\tctx.shadowBlur = r/20;\n\t\t\t\t} else {\n\t\t\t\t\tctx.fillStyle = \"#AAA\";\n\t\t\t\t\tctx.shadowColor = \"#000\";\n\t\t\t\t\tctx.shadowBlur = r/100;\n\t\t\t\t}\n\t\t\t\tctx.font = \"bold \" + r/sections.length*0.7 + \"px serif\";\n\t\t\t\tctx.textAlign = \"center\";\n\t\t\t\tctx.textBaseline = \"middle\";\n\t\t\t\tctx.translate(cx, cy);\n\t\t\t\tctx.rotate(a);\n\t\t\t\tctx.fillText(sections[i], r*0.62, 0);\n\t\t\t\tctx.restore();\n\t\t\t}\n\t\t\twheels.push(c);\n\t\t}\n\t}\n\tif (frame === null) {\n\t\tframe = canvas2.current;\n\t\tframe.width = frame.height = 10 + 2*r*1.25 | 0;\n\t\tlet ctx2 = frame.getContext(\"2d\"), cx = frame.width/2, cy = frame.height/2;\n\t\tctx2.shadowOffsetX = r/80;\n\t\tctx2.shadowOffsetY = r/80;\n\t\tctx2.shadowBlur = r/40;\n\t\tctx2.shadowColor = \"rgba(0,0,0,0.5)\";\n\t\tctx2.beginPath();\n\t\tctx2.arc(cx, cy, r*1.025, 0, 2*Math.PI, true);\n\t\tctx2.arc(cx, cy, r*0.975, 0, 2*Math.PI, false);\n\t\tctx2.fillStyle = \"#444\";\n\t\tctx2.fill();\n\t\tctx2.shadowOffsetX = r/40;\n\t\tctx2.shadowOffsetY = r/40;\n\t\tlet g = ctx2.createRadialGradient(cx-r/7, cy-r/7, 0, cx, cy, r/3);\n\t\tg.addColorStop(0, \"#FFF\");\n\t\tg.addColorStop(0.2, \"#F44\");\n\t\tg.addColorStop(1, \"#811\");\n\t\tctx2.fillStyle = g;\n\t\tctx2.beginPath();\n\t\tctx2.arc(cx, cy, r/3.5, 0, 2*Math.PI, false);\n\t\tctx2.fill();\n\t\tctx2.translate(cx, cy);\n\t\tctx2.rotate(Math.PI - 0.2);\n\t\tctx2.beginPath();\n\t\tctx2.moveTo(- r*1.1, - r*0.05);\n\t\tctx2.lineTo(- r*0.9, 0);\n\t\tctx2.lineTo(- r*1.1, r*0.05);\n\t\tctx2.fillStyle = \"#F44\";\n\t\tctx2.fill();\n\t}\n\t\tcanvas3.current.width = innerWidth;\n\t\tcanvas3.current.height = innerHeight;\n\tlet cx = innerWidth/2, cy = innerHeight/2;\n\tlet ctx3 = canvas3.current.getContext(\"2d\");\n\tselected = (Math.floor((- 0.2 - angle) * sections.length / (2*Math.PI))\n\t\t% sections.length);\n\tif (selected < 0) selected += sections.length;\n\tctx3.save();\n\tctx3.translate(cx, cy);\n\tctx3.rotate(angle);\n\tctx3.translate(-wheels[selected].width/2, -wheels[selected].height/2);\n\tctx3.drawImage(wheels[selected], 0, 0);\n\tctx3.restore();\n\tctx3.drawImage(frame, cx - frame.width/2, cy - frame.height/2);\n\t}\n\n\tconst getRandomInt = (min, max) => {\n\t\treturn Math.floor(Math.random() * (max - min)) + min;\n\t}\n\n\tconst getResult = () => {\n\t\tlet arrResult = []\n\t\tfor (let i = 0; i < probability.length; i++) {\n\t\t\tfor (let ii = 0; ii < probability[i]; ii++){\n\t\t\t\tarrResult.push(i)\n\t\t\t}\n\t\t}\n\t\treturn arrResult[getRandomInt(0, arrResult.length)]\n\t}\n\n\n\tconst spin = (speed, duration) => {\n\t\tlet start = performance.now(), angle0 = angle;\n\t\tfunction frame() {\n\t\t\tlet now = performance.now();\n\t\t\tlet t = (now - start) / duration;\n\t\t\tif (t > 1) t = 1;\n\t\t\tangle = angle0 + (speed*t - 0.5*speed*t*t)*100;\n\t\t\trepaint(angle);\n\t\t\tif (t < 1) requestAnimationFrame(frame); else {\n\t\t\t\trunning = false\n\t\t\t\tprops.setResult(sections[selected])\n\t\t\t\tif(props.attempts === 0) {\n\t\t\t\t\tprops.setAttempts(1)\n\t\t\t\t\tprops.setActivePanel(\"result\")\n\t\t\t\t} else if (props.attempts === 1) {\n\t\t\t\t\tprops.setAttempts(2)\n\t\t\t\t\tprops.setActivePanel(\"Сongratulation\")\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\trequestAnimationFrame(frame);\n\t\trunning = true;\n\t}\n\n\tconst run = () => {\n\t\tif (!running) {\n\t\t\tlet result = getResult()\n\t\t\t//градусов на 1 позицию\n\t\t\tlet degrees = 360 / sections.length; //90\n\t\t\t// сколько надо на 1 градус\n\t\t\tlet fullDegrees = 360\n\t\t\tlet startDegreesResult = 0\n\t\t\tlet finishDegreesResult = 360\n\t\t\tfor (let i = sections.length; i > 0; i--) {\n\t\t\t\tif (i === result + 1) finishDegreesResult = fullDegrees - 1\n\t\t\t\tfullDegrees = fullDegrees - degrees\n\t\t\t\tif (i === result + 1) startDegreesResult = fullDegrees + 1\n\t\t\t}\n\t\t\tconsole.log(result + 1)\n\t\t\tlet randomSpeed = getRandomInt(startDegreesResult, finishDegreesResult) * 0.00034906\n\n\t\t\t// spin(0.5+Math.random()*0.125, 5000);\n\t\t\t// spin(0.5025+0.1255, 5000); от 1 до 2 круга ровно\n\t\t\t//конец первого значения 0.5025+0.1217\n\t\t\t//нчало первого 0.5025+0.0905\n\t\t\t//начало 4 - 0.62432 и 0.49866\n\t\t\t// круг идет 0,12566 позиций, т.е. от 0.49866 до 0.62432 начиная с конца\n\t\t\t//0,00034906\n\n\t\t\tspin(0.62432 - randomSpeed, 5000);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Panel id={id}>\n\t\t\t<div>\n\t\t\t</div>\n\t\t\t\t<canvas ref={canvas3} id=\"canvas\" width=\"956\" height=\"754\" className='canvas'></canvas>\n\t\t\t\t<Div align='center'>\n\t\t\t\t\t<Button onClick={run} disabled={running} align='center'>\n\t\t\t\t\t\tВращать колесо\n\t\t\t\t\t</Button>\n\t\t\t\t</Div>\n\t\t\t<canvas hidden={true} ref={canvas} id=\"canvas\" width=\"956\" height=\"754\"></canvas>\n\t\t\t<canvas hidden={true} ref={canvas2} id=\"canvas\" width=\"956\" height=\"754\"></canvas>\n\t\t</Panel>\n\t);\n}\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n\tfetchedUser: PropTypes.shape({\n\t\tphoto_200: PropTypes.string,\n\t\tfirst_name: PropTypes.string,\n\t\tlast_name: PropTypes.string,\n\t\tcity: PropTypes.shape({\n\t\t\ttitle: PropTypes.string,\n\t\t}),\n\t}),\n};\n\nexport default Home;\n","import React from 'react';\r\nimport \"./Сongratulation.css\"\r\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\r\n\r\n\r\nconst Сongratulation = (props) => {\r\n    const time = new Date().getHours();\r\n    const workTime = `Ваш приз ${props.result}, мы свяжемся с Вами в ближайшие 30 минут`;\r\n    const nonWorkTime = `Ваш приз ${props.result}, наш менеджер свяжется с Вами завтра до 11:00`;\r\n\r\n    return (\r\n        <Panel id={props.id} className=\"СongratulationFormSell\">\r\n            <div className='Сongratulation mx-auto'>\r\n                <h2>{time < 9 || time > 21 ? nonWorkTime : workTime}</h2>\r\n            </div>\r\n        </Panel>\r\n    );\r\n}\r\n\r\nexport default Сongratulation;\r\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { platform, IOS } from '@vkontakte/vkui';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport HeaderButton from '@vkontakte/vkui/dist/components/HeaderButton/HeaderButton';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport Group from '@vkontakte/vkui/dist/components/Group/Group';\nimport Button from \"@vkontakte/vkui/dist/components/Button/Button\";\nimport Div from \"@vkontakte/vkui/dist/components/Div/Div\";\nimport \"./Сongratulation.css\"\nimport Сongratulation from \"./Сongratulation\";\n\nconst osName = platform();\n\nconst Result = props => (\n\t<Panel id={props.id}>\n\t\t<div className=\"СongratulationFormSell\">\n\t\t\t<div className='Сongratulation mx-auto'>\n\t\t\t\t<h2> Поздравляем! </h2>\n\t\t\t\t<p>Вы выграли {props.result}</p>\n\t\t\t\t<p>Вы можете поробовать еще один раз</p>\n\n\t\t\t\t<Button onClick={props.go} data-to=\"home\" align='left'>\n\t\t\t\t\tВращать еще раз\n\t\t\t\t</Button>\n\t\t\t\t<br/>\n\t\t\t\t<br/>\n\t\t\t\t<Button onClick={props.go} data-to=\"Сongratulation\" align='right'>\n\t\t\t\t\tЗабрать приз\n\t\t\t\t</Button>\n\n\t\t\t</div>\n\t\t</div>\n\t</Panel>\n);\n\nResult.propTypes = {\n\tid: PropTypes.string.isRequired,\n\tgo: PropTypes.func.isRequired,\n};\n\nexport default Result;\n","import React, { useState, useEffect } from 'react';\nimport connect from '@vkontakte/vk-connect';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport ScreenSpinner from '@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './app.css'\nimport Home from './panels/Home';\nimport Result from './panels/Result';\nimport Сongratulation from \"./panels/Сongratulation\";\n\nconst App = () => {\n\tconst [activePanel, setActivePanel] = useState('home');\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(<ScreenSpinner size='large' />);\n\tconst [result, setResult] = useState(null);\n\tconst [attempts, setAttempts] = useState(0);\n\n\n\n\tuseEffect(() => {\n\t\tconnect.subscribe(({ detail: { type, data }}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\t\tasync function fetchData() {\n\t\t\tconst user = await connect.sendPromise('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\t\tfetchData();\n\t}, []);\n\n\n\n\tconst go = e => {\n\t\tsetActivePanel(e.currentTarget.dataset.to);\n\t};\n\n\treturn (\n\t\t<View activePanel={activePanel}>\n\t\t\t<Home id='home' fetchedUser={fetchedUser} go={go} setActivePanel={setActivePanel}\n\t\t\t\t  result={result} setResult={setResult}\n\t\t\t\t  setAttempts={setAttempts}\n\t\t\t\t  attempts={attempts}\n\t\t\t/>\n\t\t\t<Result id='result' go={go} result={result}/>\n\t\t\t<Сongratulation id='Сongratulation' go={go} result={result}/>\n\t\t</View>\n\t);\n}\n\nexport default App;\n\n","import 'core-js/features/map';\nimport 'core-js/features/set';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport connect from '@vkontakte/vk-connect';\nimport App from './App';\n// import registerServiceWorker from './sw';\n\n// Init VK  Mini App\nconnect.send('VKWebAppInit');\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}